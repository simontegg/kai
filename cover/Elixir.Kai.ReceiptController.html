<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>cover/Elixir.Kai.ReceiptController.html</title>
</head><body style='background-color: white; color: black'>
<pre>
File generated from /home/simontegg/projects/kai/web/controllers/receipt_controller.ex by COVER 2017-01-08 at 09:02:58

****************************************************************************

<font color=red>     0..|  defmodule Kai.ReceiptController do</font>
        |    use Kai.Web, :controller
        |  
        |    alias Kai.Receipt
        |    alias Kai.ReceiptUploader
        |  
        |    def index(conn, _params) do
        |      receipts = Repo.all(Receipt)
        |      render(conn, "index.html", receipts: receipts)
        |    end
        |  
        |    def new(conn, _params) do
        |      changeset = Receipt.changeset(%Receipt{})
        |      render(conn, "new.html", changeset: changeset)
        |    end
        |  
        |    def create(conn, %{"receipt" =&gt; receipt_params}) do
        |      changeset = Receipt.changeset(%Receipt{}, receipt_params)
        |  
        |      case Repo.insert(changeset) do
        |        {:ok, _receipt} -&gt;
        |          conn
        |          |&gt; put_flash(:info, "Receipt created successfully.")
        |          |&gt; redirect(to: receipt_path(conn, :index))
        |        {:error, changeset} -&gt;
        |          render(conn, "new.html", changeset: changeset)
        |      end
        |    end
        |  
        |    def show(conn, %{"id" =&gt; id}) do
        |      receipt = Repo.get!(Receipt, id)
        |      render(conn, "show.html", receipt: receipt)
        |    end
        |  
        |    def edit(conn, %{"id" =&gt; id}) do
        |      receipt = Repo.get!(Receipt, id)
        |      changeset = Receipt.changeset(receipt)
        |      render(conn, "edit.html", receipt: receipt, changeset: changeset)
        |    end
        |  
        |    def update(conn, %{"id" =&gt; id, "receipt" =&gt; receipt_params}) do
        |      receipt = Repo.get!(Receipt, id)
        |      changeset = Receipt.changeset(receipt, receipt_params)
        |  
        |      case Repo.update(changeset) do
        |        {:ok, receipt} -&gt;
        |          conn
        |          |&gt; put_flash(:info, "Receipt updated successfully.")
        |          |&gt; redirect(to: receipt_path(conn, :show, receipt))
        |        {:error, changeset} -&gt;
        |          render(conn, "edit.html", receipt: receipt, changeset: changeset)
        |      end
        |    end
        |  
        |    def delete(conn, %{"id" =&gt; id}) do
        |      receipt = Repo.get!(Receipt, id)
        |  
        |      # Here we use delete! (with a bang) because we expect
        |      # it to always work (and if it does not, it will raise).
        |      Repo.delete!(receipt)
        |  
        |      conn
        |      |&gt; put_flash(:info, "Receipt deleted successfully.")
        |      |&gt; redirect(to: receipt_path(conn, :index))
        |    end
        |  end
</pre>
</body>
</html>
